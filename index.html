<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Nicole Kinlock" />
  <title>R mini course</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/reveal.js-4.2.1/dist/reset.css">
  <link rel="stylesheet" href="index_files/reveal.js-4.2.1/dist/reveal.css">

  <style type="text/css">
    /* CSS from pandoc style.html() */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            .sourceCode { overflow: visible; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; } /* Alert */
            code span.an { color: #008000; } /* Annotation */
            code span.at { } /* Attribute */
            code span.bu { } /* BuiltIn */
            code span.cf { color: #0000ff; } /* ControlFlow */
            code span.ch { color: #008080; } /* Char */
            code span.cn { } /* Constant */
            code span.co { color: #008000; } /* Comment */
            code span.cv { color: #008000; } /* CommentVar */
            code span.do { color: #008000; } /* Documentation */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.im { } /* Import */
            code span.in { color: #008000; } /* Information */
            code span.kw { color: #0000ff; } /* Keyword */
            code span.op { } /* Operator */
            code span.ot { color: #ff4000; } /* Other */
            code span.pp { color: #ff4000; } /* Preprocessor */
            code span.sc { color: #008080; } /* SpecialChar */
            code span.ss { color: #008080; } /* SpecialString */
            code span.st { color: #008080; } /* String */
            code span.va { } /* Variable */
            code span.vs { color: #008080; } /* VerbatimString */
            code span.wa { color: #008000; font-weight: bold; } /* Warning */
              </style>

  <link rel="stylesheet" href="index_files/reveal.js-4.2.1/dist/theme/simple.css" id="theme">


  <style type="text/css">
  /* some tweaks to reveal css */
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }
    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }
  </style>

    <script src="index_files/header-attrs-2.25/header-attrs.js"></script>
    <link href="index_files/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
    <link href="index_files/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">R mini course</h1>
  <h2 class="author">Nicole Kinlock</h2>
</section>

<section>
<section id="overview" class="title-slide slide level1">
<h1>Overview</h1>
<style type="text/css">
:root {
    --r-main-font-size: 32px;
}
</style>
<ul>
<li>Part 1: <a href = "#/2"> Basics of R </a></li>
<li>Part 2: <a href = "#/3"> Probability &amp; distributions </a></li>
<li>Part 3: <a href = "#/4"> Data manipulation </a></li>
<li>Part 4: <a href = "#/5"> Looping and vectorization </a></li>
<li>Part 5: <a href = "#/6"> Functions </a></li>
<li>Part 6: <a href = "#/7"> Data visualization using ggplot2 </a></li>
</ul>
</section>
<section id="about-this-course" class="slide level2">
<h2>About this course</h2>
<p>This course was originally developed by Ben Weinstein (2014), Mike
McCann (2015), and Nicole Kinlock (2016, 2017) as a workshop in the
Department of Ecology &amp; Evolution at Stony Brook University</p>
</section></section>
<section>
<section id="part-1-basics-of-r" class="title-slide slide level1">
<h1><strong>Part 1:</strong> Basics of R</h1>

</section>
<section id="what-is-r" class="slide level2">
<h2>What is R?</h2>
<ul>
<li>Statistical programming language and environment</li>
<li>Freely available as public domain software <em>(i.e. not
copyrighted)</em></li>
<li>Available on all operating systems: Windows, macOS, Linux</li>
<li>Better than most commercial alternatives</li>
<li>Not just for statistics, but also general purpose programming</li>
</ul>
</section>
<section id="why-use-r" class="slide level2">
<h2>Why use R?</h2>
<ul>
<li>Flexible</li>
<li>Transparent</li>
<li>Large user base</li>
<li>Valued skill</li>
</ul>
</section>
<section id="rstudio" class="slide level2">
<h2>RStudio</h2>
<ul>
<li>Integrated development environment (IDE) for the R language</li>
<li>Specifically designed to improve coding experience in R</li>
<li>Free version available</li>
<li>When you open RStudio, it should find your locally installed version
of R</li>
</ul>
</section>
<section id="rstudio-layout" class="slide level2">
<h2>RStudio layout</h2>
<ul>
<li>The screen is split four ways:
<ul>
<li><strong>Workspace:</strong> (Top left) Write scripts are written
&amp; saved</li>
<li><strong>Console:</strong> (Bottom left) Where commands are run</li>
<li><strong>Environment, History:</strong> (Top right) Where objects are
stored</li>
<li><strong>Files, Plots, Packages, &amp; Help:</strong> (Bottom right)
View filesystem, figures, packages, help</li>
</ul></li>
</ul>
</section>
<section id="writing-a-script" class="slide level2">
<h2>Writing a script</h2>
<ul>
<li>A <strong>script</strong> is a plain text file with R commands in it
– this will be where you save the code that you are writing</li>
<li>The file will end in the extension <code>.R</code></li>
<li>Open a new script by clicking the <code>New file</code> icon in the
top left corner of RStudio and selecting <code>R script</code></li>
</ul>
</section>
<section id="run-r-code" class="slide level2">
<h2>Run R code</h2>
<ul>
<li>Type directly into the console (best when you don’t want to save the
code) or type into a script (can be saved and rerun as needed)</li>
<li>In the console: run code by hitting the <code>ENTER</code> key
(<code>⏎</code>)</li>
<li>In a script: run code by placing your cursor on a line (or highlight
a larger block of code) and hitting the <code>CTRL + ENTER</code>
(<code>STRG + ⏎</code>) keys on Windows/Linux or
<code>CMD + ENTER</code> (<code>CMD + ⏎</code>) on Mac</li>
<li>Note that you <em>could</em> also use the <code>Run</code> button in
RStudio – however, I recommend relying on the GUI as little as possible
when you’re learning to code</li>
</ul>
</section>
<section id="r-as-a-calculator" class="slide level2">
<h2>R as a calculator</h2>
<ul>
<li>R has many <strong>arithmetic</strong> operators
<ul>
<li><code>+</code> Addition</li>
<li><code>-</code> Subtraction</li>
<li><code>*</code> Multiplication</li>
<li><code>/</code> Division</li>
<li><code>^</code> Exponentiation</li>
<li><code>%%</code> Modulus (finds remainder)</li>
<li><code>%/%</code> Integer division (leaves off remainder)</li>
</ul></li>
<li>R obeys the standard order of operations</li>
</ul>
</section>
<section id="r-as-a-calculator-1" class="slide level2">
<h2>R as a calculator</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1105</span> <span class="sc">/</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] 276.25</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">%%</span> <span class="dv">7</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</section>
<section id="r-is-logical" class="slide level2">
<h2>R is logical</h2>
<ul>
<li>R also has many <strong>logical</strong> operators
<ul>
<li><code>&lt;</code> Less than</li>
<li><code>&lt;=</code> Less than or equal to</li>
<li><code>&gt;</code> Greater than</li>
<li><code>&gt;=</code> Greater than or equal to<br />
</li>
<li><code>==</code> Exactly equal to</li>
<li><code>!=</code> Not equal to</li>
<li><code>!</code> NOT</li>
<li><code>|</code> OR</li>
<li><code>&amp;</code> AND</li>
</ul></li>
</ul>
</section>
<section id="r-is-logical-1" class="slide level2">
<h2>R is logical</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span> <span class="sc">==</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&gt;</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span> <span class="dv">7</span> <span class="sc">!=</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</section>
<section id="your-turn" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>What is 45 multiplied by 982?</p></li>
<li><p>What is 13 to the fifth power?</p></li>
<li><p>Is 8 to the third power equal to the sum of 52 and 76 multiplied
by 4?</p></li>
</ol>
</section>
<section id="creating-objects" class="slide level2">
<h2>Creating objects</h2>
<ul>
<li>An <strong>object</strong> is the fundamental unit in R – all
expressions can be saved as an object</li>
<li>Objects show up in your environment (upper right panel)</li>
<li>To create an object we use the <strong>assignment operator</strong>
(<code>&lt;-</code>), which assigns expressions on the right to objects
on the left</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> (<span class="dv">14</span> <span class="sc">+</span> <span class="dv">185</span>)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 39601</code></pre>
</section>
<section id="assignment-operator" class="slide level2">
<h2>Assignment operator</h2>
<ul>
<li>Do not use <code>=</code> for assignment in R. It’s best practice to
use <code>&lt;-</code> instead.</li>
<li>This is arbitrary, but a convention in R
<ul>
<li>FYI: the reasoning is that <code>&lt;-</code> maintains backwards
compatibility with S-Plus</li>
</ul></li>
<li>But, it can be a good idea to follow conventions – this makes your
code more readable to others
<ul>
<li><a href = "https://google.github.io/styleguide/Rguide.html" target = "_blank">Google’s
R Style Guide</a></li>
<li><a href = "http://adv-r.had.co.nz/Style.html" target = "_blank">Advanced
R: Style Guide</a></li>
</ul></li>
</ul>
</section>
<section id="r-tip-comment-on-your-code" class="slide level2"
data-background-color="#ccebc5">
<h2 data-background-color="#ccebc5">R Tip: Comment on your code</h2>
<ul>
<li>Use hashtags (<code>#</code>) to comment on your script – anything
to the right of a <code>#</code> is ignored</li>
<li>It’s surprisingly hard to remember what you did when reviewing older
code, and it’s particularly important when other people are reading your
code</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">+</span> <span class="dv">5</span>  <span class="co"># this adds five and five </span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10 + 10 this does not add ten and ten</span></span></code></pre></div>
</section>
<section id="expressions-using-objects" class="slide level2">
<h2>Expressions using objects</h2>
<p>Objects can be combined into other, larger objects</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">*</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> a <span class="sc">*</span> b</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## [1] 800</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this is equivalent to: </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="sc">*</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## [1] 800</code></pre>
</section>
<section id="your-turn-1" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li>Create an object that is equal to your age. Create another object
that is equal to the age of the person next to you. Find the difference
between these objects.</li>
</ol>
</section>
<section id="data-structure-1-vectors" class="slide level2">
<h2>Data structure 1: Vectors</h2>
<ul>
<li>R has 5 common data structures – we will start with the simplest:
<strong>vectors</strong>, which are one dimensional structures</li>
<li>Vectors come in four types: numeric, integer, logical
(<code>TRUE</code> or <code>FALSE</code>), and character</li>
<li>A vector is made using the combine function, <code>c()</code>.</li>
</ul>
</section>
<section id="vectors-with-integers-and-numbers" class="slide level2">
<h2>Vectors with integers and numbers</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">3.24</span>, <span class="fl">4.57</span>, <span class="fl">5.03</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>## [1] 3.24 4.57 5.03</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1] 8 4 2 1 1</code></pre>
</section>
<section id="vectors-with-characters" class="slide level2">
<h2>Vectors with characters</h2>
<p>Characters in R need to be enclosed in quotation marks</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pets <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dog&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="st">&quot;bird&quot;</span>, <span class="st">&quot;fish&quot;</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>pets</span></code></pre></div>
<pre><code>## [1] &quot;dog&quot;  &quot;cat&quot;  &quot;bird&quot; &quot;fish&quot;</code></pre>
</section>
<section id="vectors---combining-multiple-objects" class="slide level2">
<h2>Vectors - Combining multiple objects</h2>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make objects </span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="dv">4</span> <span class="sc">*</span> <span class="dv">7</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="dv">19</span> <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combine</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">c</span>(a, b, g)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>## [1] 5.291503 2.000000 5.000000 9.500000</code></pre>
</section>
<section id="vectors---regular-sequences" class="slide level2">
<h2>Vectors - Regular sequences</h2>
<p>You can use a colon (<strong>:</strong>) to create a vector that
includes all integers in between the numbers on either side of the
colon</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</section>
<section id="vectors---regular-sequences-1" class="slide level2">
<h2>Vectors - Regular sequences</h2>
<p>You can use the <code>seq()</code> function to create a sequential
vector with a particular minimum (<code>from</code>), maximum
(<code>to</code>), and increment (<code>by</code>)</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##  [1]  0  2  4  6  8 10 12 14 16 18 20</code></pre>
</section>
<section id="your-turn-2" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Create a vector that includes all integers between 5 and 25. Name
this vector <code>x</code>.</p></li>
<li><p>Create a vector that includes all even integers between 2 and 22.
Name this vector <code>y</code>.</p></li>
<li><p>Create a single vector that <strong>combines</strong> object x
and object y. Name this vector <code>z</code>.</p></li>
</ol>
</section>
<section id="vectors---index-by-position" class="slide level2">
<h2>Vectors - Index by position</h2>
<p>You can access any element in a vector by putting its
<strong>position</strong> in square brackets <code>[]</code></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">76</span>, <span class="dv">72</span>, <span class="dv">74</span>, <span class="dv">74</span>, <span class="dv">78</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>height</span></code></pre></div>
<pre><code>## [1] 76 72 74 74 78</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>height[<span class="dv">5</span>]  <span class="co"># extract the 5th element in the vector </span></span></code></pre></div>
<pre><code>## [1] 78</code></pre>
</section>
<section id="vectors---index-by-position-1" class="slide level2">
<h2>Vectors - Index by position</h2>
<p>You can also use positional vector indexing to return the same
vector, but with certain elements missing, using the minus
(<code>-</code>) sign</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>height <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">76</span>, <span class="dv">72</span>, <span class="dv">74</span>, <span class="dv">74</span>, <span class="dv">78</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>height[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 72 74 74 78</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>height[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## [1] 76 74 78</code></pre>
</section>
<section id="vectors---index-by-name" class="slide level2">
<h2>Vectors - Index by name</h2>
<p>You can assign <strong>names</strong> to each element of the vector,
and then extract an element by indexing based on the name</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">monday =</span> <span class="fl">28.1</span>, <span class="at">tuesday =</span> <span class="fl">28.5</span>, <span class="at">wednesday =</span> <span class="fl">29.0</span>, </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">thursday =</span> <span class="fl">30.1</span>, <span class="at">friday =</span> <span class="fl">30.2</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>temp</span></code></pre></div>
<pre><code>##    monday   tuesday wednesday  thursday    friday 
##      28.1      28.5      29.0      30.1      30.2</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>temp[<span class="st">&quot;wednesday&quot;</span>]</span></code></pre></div>
<pre><code>## wednesday 
##        29</code></pre>
</section>
<section id="vectors---logical-indexing" class="slide level2">
<h2>Vectors - Logical indexing</h2>
<p>You can extract elements in a vector that meet specific criteria
based on a <strong>logical expression</strong></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">50</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>y[y <span class="sc">&lt;=</span> <span class="dv">10</span>]   <span class="co"># extract elements less than or equal to 10</span></span></code></pre></div>
<pre><code>## [1]  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>y[y <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> y <span class="sc">!=</span> <span class="dv">5</span>]   <span class="co"># extract elements less than 10 that are not equal to 5</span></span></code></pre></div>
<pre><code>## [1] 6 7 8 9</code></pre>
</section>
<section id="your-turn-3" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>What are the 5th and 12th positions of the vector
<code>seq(from = 5, to = 15, by = 0.5)</code>?</p></li>
<li><p>Create the vector <code>15:45</code> and name it <code>m</code>.
Extract all elements of <code>m</code> that are greater than or equal to
21.</p></li>
</ol>
</section>
<section id="what-is-a-function" class="slide level2">
<h2>What is a function?</h2>
<ul>
<li>A function is an object that performs a task given some inputs
called <strong>arguments</strong></li>
<li>R has many functions already available, but you can also write your
own</li>
<li>Functions are called in the format:
<code>FunctionName(arguments)</code></li>
<li>The output of a function can be saved as an object:
<code>output &lt;- FunctionName(arguments)</code></li>
</ul>
</section>
<section id="function-arguments" class="slide level2">
<h2>Function arguments</h2>
<ul>
<li>It’s not necessary to name arguments, but it can be helpful for you
and others reading your code</li>
<li>If you don’t name arguments, then the order in which you enter them
matters</li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</section>
<section id="common-functions" class="slide level2">
<h2>Common functions</h2>
<ul>
<li>Use <code>sum()</code> to take the sum of all elements in a
vector:</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<ul>
<li>Use <code>mean()</code> to take the mean of all elements in a
vector:</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">seq</span>(<span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>## [1] 52.5</code></pre>
</section>
<section id="functions-can-act-on-an-object" class="slide level2">
<h2>Functions can act on an object</h2>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">5</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the vector x as the input to the mean function</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 52.5</code></pre>
</section>
<section id="r-tip-the-help-system" class="slide level2"
data-background-color="#ccebc5">
<h2 data-background-color="#ccebc5">R Tip: The help system</h2>
<p>Help files provide information on what a function does and list
examples at the bottom</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(mean)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>?mean  <span class="co"># same as help(mean) </span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>??robust  <span class="co"># search for help files containing &quot;robust&quot;</span></span></code></pre></div>
</section>
<section id="your-turn-4" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>What is the median of 26, 24, 8, 17, and 42?<br />
<em>Hint:</em> functions are often named intuitively</p></li>
<li><p>What does the function <code>range()</code> do? Take the range of
a vector <code>c(10, 8, 3, 5)</code></p></li>
<li><p>Is <code>mean(4, 5)</code> different than
<code>mean(c(4, 5))</code>?</p></li>
</ol>
</section>
<section id="packages" class="slide level2">
<h2>Packages</h2>
<ul>
<li>Functions can be kept inside <strong>packages</strong></li>
<li>Some packages come pre-installed with R, and others must be
downloaded</li>
</ul>
</section>
<section id="packages-1" class="slide level2">
<h2>Packages</h2>
<ul>
<li>There are many, many R packages - currently 22,477 (when I first
taught this course in 2016, there were “only” 7,742)</li>
<li>You can view all packages here:
<a href = "http://cran.r-project.org/web/packages/available_packages_by_name.html" target = "_blank">
List of R Packages</a></li>
<li>There are lots of packages commonly used by ecologists and
evolutionary biologists (e.g., <code>ape</code>, <code>sf</code>,
<code>lme4</code>, <code>dplyr</code>)</li>
</ul>
</section>
<section id="installing-packages" class="slide level2">
<h2>Installing packages</h2>
<ul>
<li>To install a package use the <code>install.packages()</code>
function</li>
<li>Be sure to surround the package name in quotation marks
(<code>""</code>)</li>
</ul>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>) </span></code></pre></div>
</section>
<section id="loading-packages" class="slide level2">
<h2>Loading packages</h2>
<ul>
<li>You have to <strong>load</strong> packages using the
<code>library()</code> or <code>require()</code> functions in order to
use them every time you restart R</li>
<li>This lets R know which packages to load and not waste memory by
loading all possible functions</li>
</ul>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)  <span class="co"># no quotation marks needed</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(ggplot2)</span></code></pre></div>
</section>
<section id="r-tip-loading-packages" class="slide level2"
data-background-color="#ccebc5">
<h2 data-background-color="#ccebc5">R Tip: Loading packages</h2>
<ul>
<li><p>Good scripts have a series of <code>require()</code> or
<code>library()</code> statements at the <strong>top</strong> of the
script.</p></li>
<li><p>FYI:
<a href = "http://yihui.name/en/2014/07/library-vs-require/">Some
say</a> that you should preferentially use <code>library()</code>,
because <code>require()</code> “tries” to load a package and
<code>library()</code> actually loads a package</p>
<ul>
<li>If you use <code>require()</code> at the top of the screen and you
don’t have the package installed, you’ll get an error message later on
when you use functions in the package (whereas with
<code>library()</code> you’ll get an error right away)</li>
</ul></li>
</ul>
</section>
<section id="the-r-user-community" class="slide level2">
<h2>The R user community</h2>
<p><a href = "http://stackoverflow.com/questions/tagged/r" target = "_blank">Stack
Overflow</a></p>
<p><a href = "http://www.r-bloggers.com/" target = "_blank">R-Bloggers</a></p>
<p><a href = "http://www.r-project.org/mail.html" target = "_blank">R
Mailing Lists</a></p>
<p>Note that large language model chatbots like ChatGPT were trained
using the above sources</p>
</section>
<section id="useful-link" class="slide level2">
<h2>Useful link</h2>
<p><a href = "https://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/plotmath.html" target = "_blank">Mathematical
Annotation in R</a></p>
</section>
<section id="practice" class="slide level2"
data-background-color="#fbb4ae">
<h2 data-background-color="#fbb4ae">Practice</h2>
<p>Worksheets created by Mike McCann and hosted on his Rpubs site</p>
<p><a href = "https://rpubs.com/mccannecology/53351" target = "_blank">Worksheet</a></p>
<p><a href = "https://rpubs.com/mccannecology/53358" target = "_blank">Answers</a></p>
</section></section>
<section>
<section id="part-2-probability-distributions"
class="title-slide slide level1">
<h1><strong>Part 2:</strong> Probability &amp; distributions</h1>

</section>
<section id="review" class="slide level2"
data-background-color="#decbe4">
<h2 data-background-color="#decbe4">Review</h2>
<ol type="1">
<li><p>What is the sum of 1 through 10, multiplied by two?</p></li>
<li><p>What are the 12th and 45th positions of the vector
<code>seq(1, 43, 0.25)</code>?</p></li>
<li><p>Find all of the elements of the vector
<code>seq(1, 10, 0.1)</code> that are less than 2. What is the median
value of these elements?</p></li>
</ol>
</section>
<section id="statistical-distributions" class="slide level2">
<h2>Statistical distributions</h2>
<p>To sample 1000 times from a normal probability distribution with mean
0 and standard deviation 1, we can use the <code>rnorm()</code>
function</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(norm)</span></code></pre></div>
<pre><code>## [1]  0.9398250 -0.2443054 -0.3926406  2.1991521 -0.2256305  0.1465497</code></pre>
<p><img src="index_files/figure-revealjs/unnamed-chunk-26-1.png" width="288" /></p>
</section>
<section id="your-turn-5" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Sample 100 random numbers from a normal distribution with a mean
of 3 and a standard deviation of 2, and assign it to an object
<code>a</code>.</p></li>
<li><p>Find the mean of your sample. How close was it to the true mean
(the mean that you set in <code>rnorm()</code>)?</p></li>
<li><p>What is the 13th element in your vector <code>a</code>?</p></li>
</ol>
</section>
<section id="generating-random-samples-from-other-distributions"
class="slide level2">
<h2>Generating random samples from other distributions</h2>
<ul>
<li>R has many available distributions, including all of those commonly
used in biological analyses</li>
<li>Depending on the distribution, each function has its own set of
parameter arguments</li>
<li>For example, the <code>rpois()</code> function is the random sampler
for the Poisson distribution and it has only one parameter,
<code>lambda</code> (<span class="math inline">\(\lambda\)</span>).</li>
</ul>
</section>
<section id="your-turn-6" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Draw 100 random samples from a Poisson distribution with
<code>lambda = 3</code>, and assign it to an object
<code>x</code>.</p></li>
<li><p>Draw 1000 random samples from a Poisson distribution with
<code>lambda = 3</code>, and assign it to an object
<code>y</code>.</p></li>
<li><p>Calculate the means of both vectors. What is the difference
between the means?</p></li>
</ol>
</section>
<section id="fundamental-quantities-of-distributions"
class="slide level2">
<h2>Fundamental quantities of distributions</h2>
<ul>
<li>For each distribution, there are 4 useful functions:
<ul>
<li><strong><code>rnorm()</code></strong> random sample</li>
<li><strong><code>dnorm()</code></strong> probability density
function</li>
<li><strong><code>pnorm()</code></strong> cumulative distribution
function</li>
<li><strong><code>qnorm()</code></strong> quantile function</li>
</ul></li>
</ul>
<p><img src="index_files/figure-revealjs/unnamed-chunk-27-1.png" width="576" /></p>
<p><small>Figure adapted from
<a href = "http://user.mendelu.cz/drapela/Forest_Biometry/Lecture%20notes/R%20-%20tutorials%20and%20commands/R%20Probability%20Functions.pdf" target = _blank">this</a>
website</small></p>
</section>
<section id="plot-distributions-with-histograms" class="slide level2">
<h2>Plot distributions with histograms</h2>
<p>Histograms (<code>hist()</code>) place data into “bins”, and count
the number (frequency) of data falling into each bin</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(sample, <span class="at">col =</span> <span class="st">&quot;palevioletred&quot;</span>, <span class="at">main =</span> <span class="st">&quot;&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;Value&quot;</span>, </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Frequency&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-28-1.png" width="480" /></p>
</section>
<section id="your-turn-7" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Sample 10 random variates (values) from a normal distribution and
make a histogram of the sample. Repeat for 100, then 1000 random
variates. What do you notice about the histograms?</p></li>
<li><p>Take a random sample from a gamma distribution using the
<code>rgamma()</code> function with <code>shape = 1</code> and make a
histogram of the sample.</p></li>
</ol>
</section>
<section id="sampling" class="slide level2">
<h2>Sampling</h2>
<p>Take a random sample of elements in a vector using the
<code>sample()</code> function</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(x, <span class="at">size =</span> <span class="dv">20</span>)  <span class="co"># sample without replacement</span></span></code></pre></div>
<pre><code>##  [1] 36 35 21 32 10  8 15  4 18 22  1  7  5 46  3 40 19 27 12 41</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(x, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)  <span class="co"># sample with replacement</span></span></code></pre></div>
<pre><code>##  [1] 46  5 47  7 33 35 24 12 15  2  2 20 36 40 17 21 17 26  4  2</code></pre>
</section>
<section id="your-turn-8" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Sample 15 elements from a vector of integers between 125 and 325
without replacement.</p></li>
<li><p>Sample 10 letters (using the pre-installed vector
<code>letters</code>) with replacement.</p></li>
<li><p>Sample 0 or 1 twelve times, with and without replacement. What
happens?</p></li>
</ol>
</section>
<section id="scatterplots" class="slide level2">
<h2>Scatterplots</h2>
<p>Scatterplots show the relationship between two variables
(<code>plot(x, y)</code>)</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># random samples from normal distributions</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>sample1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">40</span>, <span class="at">mean =</span> <span class="dv">4</span>, <span class="at">sd =</span> <span class="dv">2</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>sample2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">40</span>, <span class="at">mean =</span> <span class="dv">2</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> sample1, <span class="at">y =</span> sample2, <span class="at">xlab =</span> <span class="st">&quot;Sample 1&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Sample 2&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-30-1.png" width="288" /></p>
</section>
<section id="add-lines-to-scatterplots" class="slide level2">
<h2>Add lines to scatterplots</h2>
<ul>
<li>Add straight lines to a plot using the <code>abline()</code>
function</li>
<li>Argument <code>a</code> specifies the intercept and <code>b</code>
the slope</li>
</ul>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sample1, sample2, <span class="at">xlab =</span> <span class="st">&quot;Sample 1&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Sample 2&quot;</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">a =</span> <span class="fl">0.5</span>, <span class="at">b =</span> <span class="fl">0.75</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;royalblue&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-31-1.png" width="288" /></p>
</section>
<section id="add-model-fit-lines-to-scatterplots" class="slide level2">
<h2>Add model fit lines to scatterplots</h2>
<p>Lines can also be model fits – <code>lm()</code> fits a linear model
of <strong>y</strong> (<code>sample2</code>) as a function of
<strong>x</strong> (<code>sample1</code>)</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sample1, sample2, <span class="at">xlab =</span> <span class="st">&quot;Sample 1&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Sample 2&quot;</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>(sample2 <span class="sc">~</span> sample1), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;royalblue&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-32-1.png" width="288" /></p>
</section>
<section id="lots-of-useful-links-for-plotting" class="slide level2">
<h2>Lots of useful links for plotting</h2>
<p><a href = "http://rpubs.com/SusanEJohnston/7953" target = "_blank">R
Base Graphics: An Idiot’s Guide</a></p>
<p><a href = "https://leemendelowitz.github.io/blog/r-base-graphics-plotting.html" target = "_blank">R
Base Graphics Plotting</a></p>
<p><a href = "http://www.harding.edu/fmccown/r/" target = "_blank">Producing
Simple Graphs with R</a></p>
<p><a href = "http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" target = "_blank">R
Colors</a></p>
<p>We will talk more about plotting in Part 6</p>
</section>
<section id="practice-1" class="slide level2"
data-background-color="#fbb4ae">
<h2 data-background-color="#fbb4ae">Practice</h2>
<p><a href = "https://rpubs.com/mccannecology/53352" target = "_blank">Worksheet</a></p>
<p><a href = "https://rpubs.com/mccannecology/53359" target = "_blank">Answers</a></p>
</section></section>
<section>
<section id="part-3-data-manipulation" class="title-slide slide level1">
<h1><strong>Part 3:</strong> Data manipulation</h1>

</section>
<section id="data-structure-2-data-frames" class="slide level2">
<h2>Data structure 2: Data frames</h2>
<ul>
<li>Most data we work with in ecology &amp; evolution is
two-dimensional, with rows and columns</li>
<li><strong>Data frames</strong> are thus a very important data
structure</li>
</ul>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame with measurements of black cherry trees</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(trees)</span></code></pre></div>
<pre><code>##   Girth Height Volume
## 1   8.3     70   10.3
## 2   8.6     65   10.3
## 3   8.8     63   10.2
## 4  10.5     72   16.4
## 5  10.7     81   18.8
## 6  10.8     83   19.7</code></pre>
</section>
<section id="iris-data-frame" class="slide level2">
<h2>Iris data frame</h2>
<ul>
<li>Data frames are usually read in from a file, but R also comes with
practice data frames</li>
<li>We will use the <code>iris</code> dataset,
<a href = "http://en.wikipedia.org/wiki/Iris_flower_data_set" target = "_blank">famously
used by R.A. Fisher in 1936</a></li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</section>
<section id="data-frames---useful-functions" class="slide level2">
<h2>Data frames - Useful functions</h2>
<ul>
<li><code>head()</code> - first six rows</li>
<li><code>tail()</code> - last six rows</li>
<li><code>dim()</code> - dimensions (# rows, # columns)</li>
<li><code>nrow()</code> - number of rows</li>
<li><code>ncol()</code> - number of columns</li>
<li><code>str()</code> - structure of object <em>(very
useful!)</em></li>
<li><code>class()</code> - class of object</li>
<li><code>rownames()</code> - row names</li>
<li><code>colnames()</code> - column names</li>
</ul>
</section>
<section id="your-turn-9" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>How many rows does the <code>iris</code> data frame
have?</p></li>
<li><p>How many columns? What are the column names?</p></li>
<li><p>How many species are included in the dataset (use the
<code>str()</code> function)?</p></li>
<li><p>What are the classes of each of the columns?</p></li>
</ol>
</section>
<section id="data-structure-3-factors" class="slide level2">
<h2>Data structure 3: Factors</h2>
<ul>
<li>In the <code>iris</code> data frame, species are encoded as a
<strong>factor</strong></li>
<li>Factors, like vectors, are one dimensional and they describe
categorical data, ordered by levels</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>##  Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(iris<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] &quot;setosa&quot;     &quot;versicolor&quot; &quot;virginica&quot;</code></pre>
</section>
<section id="convert-vector-to-factor" class="slide level2">
<h2>Convert vector to factor</h2>
<ul>
<li>Make a vector into a factor using the <code>factor()</code>
function</li>
<li>Provide levels using the <code>levels</code> argument as a vector in
your desired order</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>exp.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Individual =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">Treatment =</span> <span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>))</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(exp.df<span class="sc">$</span>Treatment)</span></code></pre></div>
<pre><code>##  chr [1:4] &quot;D&quot; &quot;C&quot; &quot;D&quot; &quot;C&quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>exp.df<span class="sc">$</span>Treatment <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> exp.df<span class="sc">$</span>Treatment, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;D&quot;</span>, <span class="st">&quot;C&quot;</span>))</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(exp.df<span class="sc">$</span>Treatment)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;D&quot;,&quot;C&quot;: 1 2 1 2</code></pre>
</section>
<section id="data-frames---subsetting" class="slide level2">
<h2>Data frames - Subsetting</h2>
<ul>
<li>R has many powerful subset operators that will allow you to easily
perform complex operations on any kind of dataset (much easier than with
Excel!)</li>
<li>Think of data frames as a series of vectors grouped together into a
table</li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
</section>
<section id="data-frames---index-by-position" class="slide level2">
<h2>Data frames - Index by position</h2>
<p>Index individual elements of a data frame using square brackets
<code>df[row#, column#]</code></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="dv">1</span>, <span class="dv">1</span>]  <span class="co"># first row, first column</span></span></code></pre></div>
<pre><code>## [1] 5.1</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="dv">3</span>, <span class="dv">4</span>]  <span class="co"># third row, fourth column</span></span></code></pre></div>
<pre><code>## [1] 0.2</code></pre>
</section>
<section id="data-frames---index-by-position-1" class="slide level2">
<h2>Data frames - Index by position</h2>
<p>Index entire rows or columns by leaving one of the positions blank:
<code>df[, column#]</code> or <code>df[row#, ]</code></p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="dv">2</span>, ]  <span class="co"># subset the entire second row </span></span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 2          4.9           3          1.4         0.2  setosa</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>iris[, <span class="dv">2</span>]  <span class="co"># subset the entire second column </span></span></code></pre></div>
<pre><code>##   [1] 3.5 3.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 3.7 3.4 3.0 3.0 4.0 4.4 3.9 3.5
##  [19] 3.8 3.8 3.4 3.7 3.6 3.3 3.4 3.0 3.4 3.5 3.4 3.2 3.1 3.4 4.1 4.2 3.1 3.2
##  [37] 3.5 3.6 3.0 3.4 3.5 2.3 3.2 3.5 3.8 3.0 3.8 3.2 3.7 3.3 3.2 3.2 3.1 2.3
##  [55] 2.8 2.8 3.3 2.4 2.9 2.7 2.0 3.0 2.2 2.9 2.9 3.1 3.0 2.7 2.2 2.5 3.2 2.8
##  [73] 2.5 2.8 2.9 3.0 2.8 3.0 2.9 2.6 2.4 2.4 2.7 2.7 3.0 3.4 3.1 2.3 3.0 2.5
##  [91] 2.6 3.0 2.6 2.3 2.7 3.0 2.9 2.9 2.5 2.8 3.3 2.7 3.0 2.9 3.0 3.0 2.5 2.9
## [109] 2.5 3.6 3.2 2.7 3.0 2.5 2.8 3.2 3.0 3.8 2.6 2.2 3.2 2.8 2.8 2.7 3.3 3.2
## [127] 2.8 3.0 2.8 3.0 2.8 3.8 2.8 2.8 2.6 3.0 3.4 3.1 3.0 3.1 3.1 3.1 2.7 3.2
## [145] 3.3 3.0 2.5 3.0 3.4 3.0</code></pre>
</section>
<section id="data-frames---index-by-position-2" class="slide level2">
<h2>Data frames - Index by position</h2>
<ul>
<li>Data frames can be indexed for both rows and columns</li>
<li>To get the 5th, 7th, and 9th rows for the first two columns in the
<code>iris</code> data frame:</li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>iris[<span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>), <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width
## 5          5.0         3.6
## 7          4.6         3.4
## 9          4.4         2.9</code></pre>
</section>
<section id="data-frames---index-by-name" class="slide level2">
<h2>Data frames - Index by name</h2>
<ul>
<li>Columns can be indexed by name using square brackets</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>iris[, <span class="st">&quot;Sepal.Length&quot;</span>]</span></code></pre></div>
<ul>
<li>Or you can index a column by name using the dollar sign
(<code>$</code>) operator</li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>Sepal.Length</span></code></pre></div>
</section>
<section id="your-turn-10" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>Using the <code>iris</code> dataframe…</p>
<ol type="1">
<li><p>Subset the 9th element of the <code>Sepal.Width</code>
column</p></li>
<li><p>Subset the 1st, 4th, and 7th rows</p></li>
<li><p>Use the <code>seq()</code> function to subset all odd
rows</p></li>
<li><p>What happens when you use negative numbers to index the
<code>iris</code> dataframe? <em>Hint:</em> Use the function
<code>dim()</code> on the original and final objects</p></li>
</ol>
</section>
<section id="data-frames---logical-indexing" class="slide level2">
<h2>Data frames - Logical indexing</h2>
<p>To subset the <code>iris</code> data frame to petal widths greater
than 1 cm:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>iris.p1.sub <span class="ot">&lt;-</span> iris[iris<span class="sc">$</span>Petal.Width <span class="sc">&gt;</span> <span class="dv">1</span>  , ]  </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris.p1.sub)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor</code></pre>
</section>
<section id="data-frames---logical-indexing-1" class="slide level2">
<h2>Data frames - Logical indexing</h2>
<p>We can compare the distributions of petal widths for the complete
dataset and the subset:</p>
<p><img src="index_files/figure-revealjs/unnamed-chunk-44-1.png" width="624" /></p>
</section>
<section id="your-turn-11" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Why is <code>iris[iris &gt; 3, ]</code> a nonsensical
command?</p></li>
<li><p>Why is <code>iris[iris$Sepal.Length &gt; 3]</code> a nonsensical
command?</p></li>
<li><p>Create a histogram of petal lengths for the entire data.</p></li>
<li><p>Subset the data for petal lengths greater than two centimeters.
Create a histogram of your new data.</p></li>
</ol>
</section>
<section id="data-frames---logical-indexing-2" class="slide level2">
<h2>Data frames - Logical indexing</h2>
<p>For all types of data, if we want to subset a specific value we use
the logical operator “<code>==</code>”</p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subset of observations where petal length is equal to 4 cm</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>iris.p4.sub <span class="ot">&lt;-</span> iris[iris<span class="sc">$</span>Petal.Length <span class="sc">==</span> <span class="fl">4.0</span>,]</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris.p4.sub)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 54          5.5         2.3            4         1.3 versicolor
## 63          6.0         2.2            4         1.0 versicolor
## 72          6.1         2.8            4         1.3 versicolor
## 90          5.5         2.5            4         1.3 versicolor
## 93          5.8         2.6            4         1.2 versicolor</code></pre>
</section>
<section id="data-frames---logical-indexing-3" class="slide level2">
<h2>Data frames - Logical indexing</h2>
<p>Quotation marks (<code>""</code>) needed when subsetting by
characters or factors</p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subset only records from the species Iris versicolor</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>iris.vers.sub <span class="ot">&lt;-</span> iris[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>, ]</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris.vers.sub)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 54          5.5         2.3          4.0         1.3 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor</code></pre>
</section>
<section id="data-frames---logical-indexing-4" class="slide level2">
<h2>Data frames - Logical indexing</h2>
<ul>
<li>It’s also possible to combine logical statements:
<ul>
<li>Use <strong><code>&amp;</code></strong> (AND) if <em>both</em>
statements should be true</li>
<li>Use <strong><code>|</code></strong> (OR) if <em>either</em>
statement should be true</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subset species = versicolor AND petal length greater than 4 cm</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>iris.sub <span class="ot">&lt;-</span> iris[iris<span class="sc">$</span>Petal.Length <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span> iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>, ]</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris.sub)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 51          7.0         3.2          4.7         1.4 versicolor
## 52          6.4         3.2          4.5         1.5 versicolor
## 53          6.9         3.1          4.9         1.5 versicolor
## 55          6.5         2.8          4.6         1.5 versicolor
## 56          5.7         2.8          4.5         1.3 versicolor
## 57          6.3         3.3          4.7         1.6 versicolor</code></pre>
</section>
<section id="your-turn-12" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>Explain each of the following indexing statements:</p>
<ol type="1">
<li><p><code>iris[1:4, ]</code></p></li>
<li><p><code>iris[c(1:15), c(1, 3)]</code></p></li>
<li><p><code>iris[iris$Species == "setosa", "Petal.Width"]</code></p></li>
<li><p>What happens when you add a <code>!</code> before a logical
statement? <em>Hint:</em> Compare
<code>iris[iris$Species == "setosa", ]</code> and
<code>iris[!(iris$Species == "setosa"), ]</code>.</p></li>
</ol>
</section>
<section id="data-frames---building-from-scratch" class="slide level2">
<h2>Data frames - Building from scratch</h2>
<p>Use the <strong><code>data.frame()</code></strong> function</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>num.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">y =</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>num.df</span></code></pre></div>
<pre><code>##   x y
## 1 1 6
## 2 2 5
## 3 3 4
## 4 4 3
## 5 5 2</code></pre>
</section>
<section id="data-frames---add-columns" class="slide level2">
<h2>Data frames - Add columns</h2>
<p>You can also add columns using the <code>data.frame()</code>
function</p>
<div class="sourceCode" id="cb109"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>num.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(num.df, <span class="at">z =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>num.df</span></code></pre></div>
<pre><code>##   x y z
## 1 1 6 a
## 2 2 5 b
## 3 3 4 c
## 4 4 3 d
## 5 5 2 e</code></pre>
</section>
<section id="data-frames---add-columns-1" class="slide level2">
<h2>Data frames - Add columns</h2>
<p>Or, you can use the assignment operator <code>&lt;-</code> with the
<code>$</code> notation</p>
<div class="sourceCode" id="cb111"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>num.df<span class="sc">$</span>z <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>num.df</span></code></pre></div>
<pre><code>##   x y z
## 1 1 6 a
## 2 2 5 b
## 3 3 4 c
## 4 4 3 d
## 5 5 2 e</code></pre>
</section>
<section id="data-frames---remove-columns" class="slide level2">
<h2>Data frames - Remove columns</h2>
<p>Use the minus (<code>-</code>) sign and the position you want to
remove</p>
<div class="sourceCode" id="cb113"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>num.sub <span class="ot">&lt;-</span> num.df[, <span class="sc">-</span><span class="dv">3</span>]</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>num.sub</span></code></pre></div>
<pre><code>##   x y
## 1 1 6
## 2 2 5
## 3 3 4
## 4 4 3
## 5 5 2</code></pre>
</section>
<section id="data-frames---remove-columns-1" class="slide level2">
<h2>Data frames - Remove columns</h2>
<p>Or, assign <code>NULL</code> to the column</p>
<div class="sourceCode" id="cb115"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>num.df<span class="sc">$</span>z <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>num.df</span></code></pre></div>
<pre><code>##   x y
## 1 1 6
## 2 2 5
## 3 3 4
## 4 4 3
## 5 5 2</code></pre>
</section>
<section id="data-structure-4-matrices" class="slide level2">
<h2>Data structure 4: Matrices</h2>
<ul>
<li>Similar to data frames, matrices are two-dimensional</li>
<li>Unlike a data frame, however, a matrix can include only numbers (not
characters or factors)</li>
</ul>
<div class="sourceCode" id="cb117"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>num.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>num.mat</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
</section>
<section id="matrices" class="slide level2">
<h2>Matrices</h2>
<p>Why do you need them? Some functions (e.g., matrix algebra functions)
require a matrix as an input</p>
<div class="sourceCode" id="cb119"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>num.df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(num.mat)  <span class="co"># convert matrix to df</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(num.df)  <span class="co"># function fails with df</span></span></code></pre></div>
<pre><code>## Error in diag(num.df): &#39;list&#39; object cannot be coerced to type &#39;double&#39;</code></pre>
<div class="sourceCode" id="cb121"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(num.mat)  <span class="co"># works with matrix</span></span></code></pre></div>
<pre><code>## [1] 1 5 9</code></pre>
</section>
<section id="matrix-indexing" class="slide level2">
<h2>Matrix indexing</h2>
<p>Indexing is the same as with data frames</p>
<div class="sourceCode" id="cb123"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>num.mat[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## [1] 2 5 8</code></pre>
<div class="sourceCode" id="cb125"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>num.mat[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 5 6</code></pre>
</section>
<section id="importing-your-own-data" class="slide level2">
<h2>Importing your own data</h2>
<ul>
<li>R is not a spreadsheet program, so it’s not great for direct data
entry</li>
<li>It’s best to start with spreadsheets for data entry and storage, and
to import spreadsheets into R for data analysis and visualization</li>
<li>CSV (comma separated values) files are often the preferred format
for importing into R</li>
<li>Before we import the example CSV file, we will need to consider
<strong>working directories</strong></li>
</ul>
</section>
<section id="working-directory" class="slide level2">
<h2>Working directory</h2>
<ul>
<li>Find out what your current working directory is using the
<code>getwd()</code> function</li>
<li>This is the folder on your computer where R will look to open or
write files</li>
<li>Though you could also use the <code>Files</code> tab (bottom right
panel) in RStudio, again, I recommend relying on the GUI as little as
possible</li>
</ul>
<div class="sourceCode" id="cb127"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code></pre></div>
<pre><code>## [1] &quot;/media/nlkhd/Nicole/Postdoc/Rminicourse&quot;</code></pre>
</section>
<section id="working-directory-1" class="slide level2">
<h2>Working directory</h2>
<p>Set your working directory using the <code>setwd()</code>
function</p>
<div class="sourceCode" id="cb129"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/nlkinlock/Documents/&quot;</span>)</span></code></pre></div>
</section>
<section id="importing-data" class="slide level2">
<h2>Importing data</h2>
<ul>
<li>Load the <code>seedlings.csv</code> file (available on Ilias) using
the <code>read.csv()</code> function</li>
<li>If you include the full path to your file, you do not need to set
your working directory</li>
</ul>
<div class="sourceCode" id="cb130"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>seedling.df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">&quot;/home/nlkinlock/Documents/seedlings.csv&quot;</span>, </span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
</section>
<section id="importing-data---file-encoding" class="slide level2">
<h2>Importing data - file encoding</h2>
<ul>
<li>File encoding can be a real pain with R – special characters can
render incorrectly (e.g., as Ã, �, or question marks)</li>
<li>Try to save spreadsheets with UTF-8 encoding and always include the
<code>fileEncoding = "UTF-8"</code> argument when reading or writing
files</li>
</ul>
<div class="sourceCode" id="cb131"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>seedling.df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">&quot;/home/nlkinlock/Documents/seedlings.csv&quot;</span>, </span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
</section>
<section id="r-tip-variable-names" class="slide level2"
data-background-color="#ccebc5">
<h2 data-background-color="#ccebc5">R Tip: Variable names</h2>
<ul>
<li>One of the largest sources of frustration with R can be importing
data</li>
<li>Variable names, e.g., column names, often cause problems
<ul>
<li>Do not include spaces or special characters in variable names</li>
<li>Abbreviate variable names when appropriate</li>
</ul></li>
</ul>
</section>
<section id="your-turn-13" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Load the data frame <code>seedlings.csv</code> using the
<code>read.csv()</code> function, and store it as an object called
<code>seedlings.df</code>.</p></li>
<li><p>What is the mean height for all seedlings? What about the mean
height for all seedlings except <em>Rhus typhina</em>?</p></li>
<li><p>What is the difference in the mean aboveground biomass for
<em>Rosa multiflora</em> seedlings and <em>Rubus occidentalis</em>
seedlings?</p></li>
</ol>
</section>
<section id="exporting-data-frames" class="slide level2">
<h2>Exporting data frames</h2>
<ul>
<li>After you’ve made changes or conducted an analyses, you may want to
export your data frame</li>
<li>Use the <code>write.csv()</code> function to export data frames</li>
<li>Remember the <code>fileEncoding = "UTF-8"</code> argument</li>
</ul>
<div class="sourceCode" id="cb132"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write the iris data frame to file </span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(iris, <span class="at">file =</span> <span class="st">&quot;iris.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
</section>
<section id="helpful-link" class="slide level2">
<h2>Helpful link</h2>
<p><a href = "http://adv-r.had.co.nz/Data-structures.html" target = "_blank">Data
structures</a></p>
</section>
<section id="practice-2" class="slide level2"
data-background-color="#fbb4ae">
<h2 data-background-color="#fbb4ae">Practice</h2>
<p><a href = "https://rpubs.com/mccannecology/53354" target = "_blank">Worksheet</a></p>
<p><a href = "https://rpubs.com/mccannecology/53360" target = "_blank">Answers</a></p>
</section></section>
<section>
<section id="part-4-looping-and-vectorization"
class="title-slide slide level1">
<h1><strong>Part 4:</strong> Looping and vectorization</h1>

</section>
<section id="for-loops" class="slide level2">
<h2>For-loops</h2>
<ul>
<li>Loops are an important tool across programming languages</li>
<li>For-loops run for a certain number of steps (iterations), and at
each step, the statements in the loop are executed</li>
<li>The basic syntax is:</li>
</ul>
<p><code>for (i in 1:number_iterations) {</code></p>
<p><code>execute these statements</code></p>
<p><code>}</code></p>
</section>
<section id="why-use-a-for-loop" class="slide level2">
<h2>Why use a for-loop?</h2>
<ul>
<li>For-loops are useful when we have a repeated process with identical
steps, but different values</li>
<li>Using loops can help you avoid writing repetitive code</li>
</ul>
</section>
<section id="our-first-for-loop-pseudocode" class="slide level2">
<h2>Our first for-loop (pseudocode)</h2>
<p><code>for (i in 1:5) {</code></p>
<p><code>i</code> starts at 1. R executes some statements;</p>
<p><code>i</code> is increased to <code>2</code> and statements are
executed again;</p>
<p><code>i</code> is increased to <code>3</code> and statements are
executed again;</p>
<p>and so on, until <code>i = 5</code>, at which point the loop executes
the set of statements for the last time</p>
<p><code>}</code></p>
</section>
<section id="our-first-for-loop" class="slide level2">
<h2>Our first for-loop</h2>
<div class="sourceCode" id="cb133"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(i)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
</section>
<section id="for-loops---braces-vs.-brackets" class="slide level2">
<h2>For-loops - braces vs. brackets</h2>
<ul>
<li>We’ll now go through the differences among:
<ul>
<li>square brackets <code>[]</code></li>
<li>curly braces <code>{}</code>: encases multiple statements within a
control-flow construct (<code>for</code>, <code>while</code>,
<code>if</code>, etc.)</li>
<li>parentheses <code>()</code>: arithmetic use as well as</li>
</ul></li>
</ul>
</section>
<section id="for-loops---square-brackets" class="slide level2">
<h2>For-loops - Square brackets</h2>
<ul>
<li>Square brackets <code>[]</code> are used to <strong>index</strong>
objects, i.e., to access elements of a vector, matrix, or data
frame</li>
<li>Pay attention to the number of dimensions the object has – the
number of <em>commas</em> inside <code>[]</code> indicates the number of
dimensions</li>
</ul>
<div class="sourceCode" id="cb135"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>test.vec <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="dv">10</span>, <span class="fl">0.1</span>)  <span class="co"># vector</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>test.vec[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">9</span>)]  <span class="co"># 1 dimension, no commas</span></span></code></pre></div>
<pre><code>## [1] 0.2 0.6 0.9</code></pre>
</section>
<section id="for-loops---square-brackets-1" class="slide level2">
<h2>For-loops - Square brackets</h2>
<div class="sourceCode" id="cb137"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>test.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">seq</span>(<span class="fl">0.1</span>, <span class="dv">10</span>, <span class="fl">0.1</span>), <span class="at">nrow =</span> <span class="dv">10</span>, <span class="at">ncol =</span> <span class="dv">10</span>)  <span class="co"># matrix</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>test.mat[<span class="dv">6</span>, <span class="dv">6</span>]  <span class="co"># 2 dimensions, 1 comma</span></span></code></pre></div>
<pre><code>## [1] 5.6</code></pre>
<div class="sourceCode" id="cb139"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>test.mat[<span class="dv">6</span>, ]</span></code></pre></div>
<pre><code>##  [1] 0.6 1.6 2.6 3.6 4.6 5.6 6.6 7.6 8.6 9.6</code></pre>
</section>
<section id="for-loops---parentheses" class="slide level2">
<h2>For-loops - Parentheses</h2>
<ul>
<li>Parentheses <code>()</code> (“round brackets” in British English)
are used to call <em>functions</em></li>
<li>Arguments are placed inside the parentheses</li>
<li>Note they are also used for arithmetic</li>
</ul>
<div class="sourceCode" id="cb141"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)  <span class="co"># parentheses call sum() function</span></span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb143"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span>) <span class="sc">*</span> <span class="dv">3</span>  <span class="co"># parentheses for arithmetic</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
</section>
<section id="for-loops---curly-braces" class="slide level2">
<h2>For-loops - Curly braces</h2>
<p>Curly braces <code>{}</code> are used to enclose all of the
statements to be executed in a for-loop (or another control flow
statement, e.g., <code>if</code>, <code>while</code>, etc.)</p>
<div class="sourceCode" id="cb145"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(i)</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3</code></pre>
</section>
<section id="using-a-for-loop" class="slide level2">
<h2>Using a for-loop</h2>
<p>You can perform operations on the <strong>loop variable</strong>, in
this case, called <code>i</code></p>
<div class="sourceCode" id="cb147"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(i<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16</code></pre>
</section>
<section id="using-a-for-loop-1" class="slide level2">
<h2>Using a for-loop</h2>
<ul>
<li><strong>Assignments</strong> can occur in a loop</li>
<li>The loop variable, <code>i</code>, is not directly called in this
loop</li>
<li>The operation <code>x &lt;- x^2</code> is done four times</li>
<li><code>x</code> changes each time because it is re-assigned in the
loop</li>
</ul>
<div class="sourceCode" id="cb149"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(x)</span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 4
## [1] 16
## [1] 256
## [1] 65536</code></pre>
</section>
<section id="your-turn-14" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>Create a for-loop that …</p>
<ol type="1">
<li><p>…prints integers 1 to 100.</p></li>
<li><p>…prints integers 100 to 1.</p></li>
<li><p>…adds 1 to integers 1 through 5.</p></li>
<li><p>…divides all even integers from 0 to 20 by 10. <em>Hint</em>: Use
the <code>seq()</code> function.</p></li>
</ol>
</section>
<section id="vectors-and-for-loops" class="slide level2">
<h2>Vectors and for-loops</h2>
<ul>
<li>In most of the above examples, we used the loop variable,
<code>i</code>, directly in mathematical operations</li>
<li>It is more common to use the loop variable to <em>loop over
elements</em> of a vector (or matrix, or data frame)</li>
</ul>
<div class="sourceCode" id="cb151"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>name.vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Larry&quot;</span>, <span class="st">&quot;Curly&quot;</span>, <span class="st">&quot;Moe&quot;</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(name.vec)) {</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Hi,&quot;</span>, name.vec[i], <span class="at">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Hi, Larry&quot;
## [1] &quot;Hi, Curly&quot;
## [1] &quot;Hi, Moe&quot;</code></pre>
</section>
<section id="vectors-and-for-loops-1" class="slide level2">
<h2>Vectors and for-loops</h2>
<p>What did that really do? Consider the loop in pieces, here just for
<code>i = 1</code></p>
<div class="sourceCode" id="cb153"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the 1st position in name.vec</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>name.vec[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] &quot;Larry&quot;</code></pre>
<div class="sourceCode" id="cb155"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine text and indexed vector</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Hi,&quot;</span>, name.vec[<span class="dv">1</span>], <span class="at">sep =</span> <span class="st">&quot; &quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot;Hi, Larry&quot;</code></pre>
</section>
<section id="for-loop-output" class="slide level2">
<h2>For-loop output</h2>
<ul>
<li>R suppresses printing inside for-loops (and other control flow
structures)</li>
<li>You can use the <code>print()</code> function to view the output of
each iteration in your console</li>
</ul>
<div class="sourceCode" id="cb157"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>name.vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Larry&quot;</span>, <span class="st">&quot;Curly&quot;</span>, <span class="st">&quot;Moe&quot;</span>)</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(name.vec)) {</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Hi,&quot;</span>, name.vec[i], <span class="at">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Hi, Larry&quot;
## [1] &quot;Hi, Curly&quot;
## [1] &quot;Hi, Moe&quot;</code></pre>
</section>
<section id="for-loop-output-1" class="slide level2">
<h2>For-loop output</h2>
<p>Without <code>print()</code> or an assignment <code>&lt;-</code>, no
output is returned</p>
<div class="sourceCode" id="cb159"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(name.vec)) {</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="st">&quot;Hi,&quot;</span>, name.vec[i], <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</section>
<section id="your-turn-15" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li><p>Create a vector of the days of the week and generate a message
that says “Today is x” using a loop</p></li>
<li><p>Explain why the following code is wrong:</p></li>
</ol>
<div class="sourceCode" id="cb160"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">sum</span>(i))</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</section>
<section id="data-structure-5-lists" class="slide level2">
<h2>Data structure 5: Lists</h2>
<ul>
<li>Lists, like vectors, are one-dimensional</li>
<li>In the example with vector <code>x</code> below, <code>1</code> and
<code>2</code> are converted to characters because <code>"blue"</code>
is included – elements in a vector must all be the same type</li>
</ul>
<div class="sourceCode" id="cb161"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;    &quot;2&quot;    &quot;blue&quot;</code></pre>
<div class="sourceCode" id="cb163"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
</section>
<section id="lists-can-include-multiple-types" class="slide level2">
<h2>Lists can include multiple types</h2>
<ul>
<li>In contrast, the elements of a list can be any type</li>
<li>Lists may seem multidimensional, but they behave as one-dimensional
data structures</li>
</ul>
<div class="sourceCode" id="cb165"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>plant.lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Mass =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.01</span>), <span class="at">Count =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">20</span>, </span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Adult =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>), </span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">Flower =</span> <span class="fu">c</span>(<span class="st">&quot;open&quot;</span>, <span class="st">&quot;closed&quot;</span>, <span class="st">&quot;closed&quot;</span>, <span class="st">&quot;open&quot;</span>))</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(plant.lst)</span></code></pre></div>
<pre><code>## List of 4
##  $ Mass  : num [1:26] 0 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 ...
##  $ Count : int [1:11] 10 11 12 13 14 15 16 17 18 19 ...
##  $ Adult : logi [1:3] TRUE FALSE FALSE
##  $ Flower: chr [1:4] &quot;open&quot; &quot;closed&quot; &quot;closed&quot; &quot;open&quot;</code></pre>
</section>
<section id="constructing-lists" class="slide level2">
<h2>Constructing lists</h2>
<p>You can construct a list using the <code>list()</code> function</p>
<div class="sourceCode" id="cb167"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>test.vec <span class="ot">&lt;-</span> <span class="fu">c</span>(x, y)  <span class="co"># create a vector</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(test.vec)</span></code></pre></div>
<pre><code>##  num [1:9] 1 2 3 4 5 3 6 8 10</code></pre>
<div class="sourceCode" id="cb169"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>test.lst <span class="ot">&lt;-</span> <span class="fu">list</span>(x, y)  <span class="co"># create a list</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(test.lst)</span></code></pre></div>
<pre><code>## List of 2
##  $ : num [1:5] 1 2 3 4 5
##  $ : num [1:4] 3 6 8 10</code></pre>
</section>
<section id="list-indexing" class="slide level2">
<h2>List indexing</h2>
<ul>
<li>Single square brackets <code>[]</code> return a list</li>
<li>Double square brackets <code>[[]]</code> return list contents</li>
<li>Main difference is the <strong>class</strong> of the output</li>
</ul>
<div class="sourceCode" id="cb171"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>test.lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="fu">c</span>(<span class="fl">3.25</span>, <span class="fl">6.75</span>, <span class="fl">8.175</span>, <span class="fl">4.5</span>), </span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">c</span>(<span class="st">&quot;apples&quot;</span>, <span class="st">&quot;bananas&quot;</span>, <span class="st">&quot;oranges&quot;</span>, <span class="st">&quot;pears&quot;</span>))</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(test.lst[<span class="dv">2</span>])  <span class="co"># returns a list</span></span></code></pre></div>
<pre><code>## List of 1
##  $ : num [1:4] 3.25 6.75 8.18 4.5</code></pre>
<div class="sourceCode" id="cb173"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(test.lst[[<span class="dv">2</span>]])  <span class="co"># returns numbers from list</span></span></code></pre></div>
<pre><code>##  num [1:4] 3.25 6.75 8.18 4.5</code></pre>
</section>
<section id="list-indexing-1" class="slide level2">
<h2>List indexing</h2>
<p>The class of the output matters</p>
<div class="sourceCode" id="cb175"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>test.lst[<span class="dv">1</span>] <span class="sc">*</span> test.lst[<span class="dv">2</span>]  <span class="co"># can&#39;t do arithmetic on lists</span></span></code></pre></div>
<pre><code>## Error in test.lst[1] * test.lst[2]: non-numeric argument to binary operator</code></pre>
<div class="sourceCode" id="cb177"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>test.lst[[<span class="dv">1</span>]] <span class="sc">*</span> test.lst[[<span class="dv">2</span>]]  <span class="co"># can do arithmetic on numbers</span></span></code></pre></div>
<pre><code>## [1]  3.250 13.500 24.525 18.000</code></pre>
</section>
<section id="list-indexing-2" class="slide level2">
<h2>List indexing</h2>
<p>In order to reference a <strong>single list element</strong>
directly, we have to use both the double square bracket
<code>[[]]</code> operator and the single bracket <code>[]</code>
operator</p>
<div class="sourceCode" id="cb179"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>test.lst[[<span class="dv">2</span>]]  <span class="co"># 2nd element of list </span></span></code></pre></div>
<pre><code>## [1] 3.250 6.750 8.175 4.500</code></pre>
<div class="sourceCode" id="cb181"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>test.lst[[<span class="dv">2</span>]][<span class="dv">2</span>]  <span class="co"># 2nd element of 2nd element of list </span></span></code></pre></div>
<pre><code>## [1] 6.75</code></pre>
</section>
<section id="how-do-we-save-for-loop-outputs" class="slide level2">
<h2>How do we save for-loop outputs?</h2>
<ul>
<li>Instead of printing to the screen, we usually want to create a new
object to store the for-loop output</li>
<li>To do this, you need to create an empty vector or list before the
loop</li>
</ul>
<div class="sourceCode" id="cb183"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>output.vec <span class="ot">&lt;-</span> <span class="fu">c</span>()  <span class="co"># create an empty vector</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">1</span>, <span class="at">sd =</span> <span class="fl">0.5</span>)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>    output.vec[i] <span class="ot">&lt;-</span> x[i] <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>output.vec</span></code></pre></div>
<pre><code>##  [1]  3.846135 21.286788 12.492741 12.164208  3.167838 11.592237  9.911036
##  [8]  7.669332  9.318119  9.225117</code></pre>
</section>
<section id="how-do-we-save-for-loop-outputs-1" class="slide level2">
<h2>How do we save for-loop outputs?</h2>
<ul>
<li>If you know ahead of time, you can make an empty vector with the
size and the type of the output you want to store</li>
<li>This makes computation faster!</li>
</ul>
<div class="sourceCode" id="cb185"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>output.vec <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">1</span>, <span class="at">sd =</span> <span class="fl">0.5</span>)</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>    output.vec[i] <span class="ot">&lt;-</span> x[i] <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>output.vec</span></code></pre></div>
<pre><code>##  [1] 10.3855444 11.4251220 13.1126015  5.8310914 20.6893518 18.2335082
##  [7] 11.4384632 11.0064255 13.8240813 -0.9570684</code></pre>
</section>
<section id="your-turn-16" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>First, create a vector, <code>y</code>, with 10 random samples from a
standard normal distribution <code>(mean = 0, sd = 1)</code>.</p>
<ol type="1">
<li><p>Compute <code>y[i] * 2</code> for 10 iterations (the length of
vector y) using a for-loop with index <code>i</code>. Place the output
in a <strong>vector</strong>.</p></li>
<li><p>Compute <code>y[i] * 2</code> for 10 iterations using a for-loop.
Place the output in a <strong>list</strong>.</p></li>
<li><p>Find the the 4th element in the output vector from question 1 and
the output list from question 2.</p></li>
</ol>
</section>
<section id="control-flow-statements---if" class="slide level2">
<h2>Control flow statements - if</h2>
<div class="sourceCode" id="cb187"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="dv">3</span> <span class="sc">&gt;</span> <span class="dv">2</span>) {</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;This makes sense&quot;</span>)</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;This makes sense&quot;</code></pre>
<div class="sourceCode" id="cb189"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;The world is not how I envisioned&quot;</span>)</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</section>
<section id="control-flow-statements---if-1" class="slide level2">
<h2>Control flow statements - if</h2>
<p>To have for-loops do different things under different conditions, use
an <code>if</code> statement</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x[i] <span class="sc">&gt;</span> <span class="dv">3</span>) {</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste</span>(x[i],<span class="st">&quot;is greater than 3&quot;</span>))</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x[i] <span class="sc">&lt;=</span> <span class="dv">3</span>) {</span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste</span>(x[i],<span class="st">&quot;is less than or equal to 3&quot;</span>))</span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;
## [1] &quot;4 is greater than 3&quot;
## [1] &quot;5 is greater than 3&quot;
## [1] &quot;6 is greater than 3&quot;</code></pre>
</section>
<section id="control-flow-statements---if-else" class="slide level2">
<h2>Control flow statements - if else</h2>
<ul>
<li><code>if</code> and <code>else</code>: run one set of statements in
one condition (<code>if</code>) and another set for every other possible
condition (<code>else</code>)</li>
</ul>
<div class="sourceCode" id="cb192"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">lambda =</span> <span class="dv">1</span>)</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>output.vec <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="dv">10</span>)</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x[i] <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>        output.vec[i] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">100</span></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>        output.vec[i] <span class="ot">&lt;-</span> x[i]<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb192-10"><a href="#cb192-10" aria-hidden="true" tabindex="-1"></a>output.vec</span></code></pre></div>
<pre><code>##  [1]    4    4 -100 -100    4    1    4    1    1    4</code></pre>
</section>
<section id="control-flow-statements---break" class="slide level2">
<h2>Control flow statements - break</h2>
<p>We can end the for-loop if certain logical conditions are met using
an <code>if</code> and a <code>break</code> statement</p>
<div class="sourceCode" id="cb194"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x[i] <span class="sc">&lt;=</span> <span class="dv">3</span>) {</span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste</span>(x[i],<span class="st">&quot;is less than or equal to 3&quot;</span>))</span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (x[i] <span class="sc">&gt;</span> <span class="dv">3</span>){</span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 is less than or equal to 3&quot;
## [1] &quot;2 is less than or equal to 3&quot;
## [1] &quot;3 is less than or equal to 3&quot;</code></pre>
</section>
<section id="control-flow-statements---next" class="slide level2">
<h2>Control flow statements - next</h2>
<p>We can <strong>skip</strong> an element that we know will cause an
error using an <code>if</code> and a <code>next</code> statement</p>
<div class="sourceCode" id="cb196"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">3</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (x[i] <span class="sc">&lt;=</span> <span class="dv">0</span>) {</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">next</span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (x[i] <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">log</span>(x[i]))</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 0
## [1] 0.6931472
## [1] 1.098612</code></pre>
</section>
<section id="your-turn-17" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>First, create a vector, <code>x</code>, with all integers from 1 to
100.</p>
<ol type="1">
<li><p>Create a for-loop that computes <code>x[i] * 2</code> for 100
iterations (the length of vector <code>x</code>). Place the output in a
vector. However, calculate <code>x[i] * 3</code> when
<code>x[i] == 32</code>.</p></li>
<li><p>Create a for-loop that computes <code>x[i] * 2</code> for 100
iterations. Place the output in a list. However, break the loop after 51
iterations.</p></li>
<li><p>Create a for-loop that computes <code>x[i] * 2</code> for 100
iterations. Place the output in a vector. However, skip
<code>x == 71</code>.</p></li>
</ol>
</section>
<section id="alternatives-to-for-loops-apply-family"
class="slide level2">
<h2>Alternatives to for-loops: <code>apply</code> family</h2>
<ul>
<li>The <code>apply</code> family of functions allows you to repeatedly
do a function to every row, column, or element in a data frame (or
vector, or list)</li>
<li><code>apply(X, MARGIN, FUN)</code> function takes three arguments
<ul>
<li><code>X</code>: your matrix or data frame</li>
<li><code>MARGIN = 1</code>: apply to rows</li>
<li><code>MARGIN = 2</code>: columns</li>
<li><code>MARGIN = c(1, 2)</code>: rows and columns</li>
<li><code>FUN</code>: function to apply</li>
</ul></li>
</ul>
</section>
<section id="using-apply" class="slide level2">
<h2>Using <code>apply</code></h2>
<p>Use <code>apply()</code> to take the median of the columns of matrix
<code>M</code></p>
<div class="sourceCode" id="cb198"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">9</span>), <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>M</span></code></pre></div>
<pre><code>##             [,1]       [,2]       [,3]
## [1,]  0.79912987 -0.4824335 -0.6337058
## [2,]  0.16477972  0.3580694  1.2481599
## [3,] -0.04590009 -0.3036447 -0.7591209</code></pre>
<div class="sourceCode" id="cb200"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(M, <span class="dv">2</span>, median)</span></code></pre></div>
<pre><code>## [1]  0.1647797 -0.3036447 -0.6337058</code></pre>
</section>
<section id="apply-vs.-for-loop" class="slide level2">
<h2><code>apply</code> vs. for-loop</h2>
<p>The same analysis, but using a for-loop</p>
<div class="sourceCode" id="cb202"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>median.vec <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(M)) {</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>    median.vec[i] <span class="ot">&lt;-</span> <span class="fu">median</span>(M[, i])</span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>median.vec</span></code></pre></div>
<pre><code>## [1]  0.1647797 -0.3036447 -0.6337058</code></pre>
</section>
<section id="apply-family-of-functions" class="slide level2">
<h2><code>apply</code> family of functions</h2>
<ul>
<li>There are other versions of <code>apply()</code> for other data
types:
<ul>
<li><code>lapply()</code>: apply function to list or vector, return
list</li>
<li><code>sapply()</code>: apply function to list or vector, return list
or vector if possible</li>
<li><code>vapply()</code>: similar to <code>sapply()</code>, but you
have to specify output type</li>
<li><code>tapply()</code>: apply function split by factor</li>
<li><code>mapply()</code>: apply function to multiple lists or
vectors</li>
</ul></li>
</ul>
</section>
<section id="using-lapply" class="slide level2">
<h2>Using <code>lapply</code></h2>
<p>Use <code>lapply()</code> to apply a function to elements of a
list</p>
<div class="sourceCode" id="cb204"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>test.lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="fl">1.4</span>, <span class="fl">4.6</span>, <span class="fl">4.2</span>, <span class="fl">2.1</span>), <span class="fu">rnorm</span>(<span class="dv">4</span>))</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(test.lst)  <span class="co"># returns an error </span></span></code></pre></div>
<pre><code>## Error in sum(test.lst): invalid &#39;type&#39; (list) of argument</code></pre>
<div class="sourceCode" id="cb206"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(test.lst, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 6
## 
## [[2]]
## [1] 12.3
## 
## [[3]]
## [1] 3.174828</code></pre>
</section>
<section id="useful-links" class="slide level2">
<h2>Useful links</h2>
<p><a href = "https://adv-r.hadley.nz/subsetting.html" target = "_blank">Subsetting
tutorial</a></p>
<p><a href = "https://adv-r.hadley.nz/control-flow.html" target = "_blank">Control
flow</a></p>
<p><a href = "https://bookdown.org/content/d1e53ac9-28ce-472f-bc2c-f499f18264a3/loops.html" target = "_blank">For-loops</a></p>
<p><a href = "https://www.r-bloggers.com/2022/03/complete-tutorial-on-using-apply-functions-in-r/" target = "_blank">Apply
family of functions</a></p>
<p><a href = "http://www.r-bloggers.com/using-apply-sapply-lapply-in-r/" target = "_blank">Apply
family of functions</a></p>
</section>
<section id="practice-3" class="slide level2"
data-background-color="#fbb4ae">
<h2 data-background-color="#fbb4ae">Practice</h2>
<p><a href = "https://rpubs.com/mccannecology/53355" target = "_blank">Worksheet</a></p>
<p><a href = "https://rpubs.com/mccannecology/53361" target = "_blank">Answers</a></p>
</section></section>
<section>
<section id="part-5-functions" class="title-slide slide level1">
<h1><strong>Part 5:</strong> Functions</h1>

</section>
<section id="functions-in-r" class="slide level2">
<h2>Functions in R</h2>
<ul>
<li>Functions contain sets of instructions that we want to carry out
repeatedly</li>
<li>We have already seen many of the basic functions that come
pre-installed with R</li>
</ul>
<div class="sourceCode" id="cb208"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>, <span class="dv">1</span>))</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abs</span>(<span class="sc">-</span><span class="dv">100</span> <span class="sc">+</span> <span class="dv">50</span>)</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(iris)</span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris)</span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">log10</span>(iris<span class="sc">$</span>Sepal.Length))</span></code></pre></div>
</section>
<section id="functions-in-packages" class="slide level2">
<h2>Functions in packages</h2>
<p>We have also seen functions that are loaded from packages</p>
<div class="sourceCode" id="cb209"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this would not run - tree is not loaded </span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tree</span>(<span class="at">formula =</span> Species <span class="sc">~</span> . <span class="sc">-</span>Species, <span class="at">data =</span> iris) </span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tree&quot;</span>)  <span class="co"># install package </span></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tree)  <span class="co"># load package </span></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="co"># now it would work </span></span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tree</span>(<span class="at">formula =</span> Species <span class="sc">~</span> . <span class="sc">-</span>Species, <span class="at">data =</span> iris)</span></code></pre></div>
</section>
<section id="writing-your-own-function" class="slide level2">
<h2>Writing your own function</h2>
<ul>
<li>It is a good idea to write your own functions instead of repeating
the same lines of code over and over</li>
<li>R functions are <strong>objects</strong> just like vectors, lists,
etc.</li>
</ul>
<p><code>FunctionName &lt;- function(&lt;arguments&gt;) { &lt;body&gt; }</code></p>
</section>
<section id="writing-your-own-function-1" class="slide level2">
<h2>Writing your own function</h2>
<div class="sourceCode" id="cb210"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define function</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>SumTwoValues <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="co"># call function</span></span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a><span class="fu">SumTwoValues</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">3</span>) </span></code></pre></div>
<pre><code>## [1] 4</code></pre>
</section>
<section id="function-environments" class="slide level2">
<h2>Function environments</h2>
<ul>
<li>Objects defined <em>inside</em> functions exist in a different
<strong>environment</strong> than the global environment
<ul>
<li>Objects inside the function don’t exist outside of the
function!</li>
</ul></li>
<li>However, if a variable is not defined inside a function, the
function will look one level above</li>
</ul>
</section>
<section id="function-environments-1" class="slide level2">
<h2>Function environments</h2>
<p>If you run the function below, you’ll see that <code>y</code> does
not pop up in your Environment panel (top right)</p>
<div class="sourceCode" id="cb212"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span>  <span class="co"># x variable defined outside the function</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>HiddenY <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="dv">1</span>  <span class="co"># y variable defined inside the function </span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">c</span>(x, y))</span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="co"># function looks for x one level above (in global environment)</span></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="fu">HiddenY</span>()</span></code></pre></div>
<pre><code>## [1] 2 1</code></pre>
</section>
<section id="function-output" class="slide level2">
<h2>Function output</h2>
<p>Unless you explicitly return the output, you won’t be able to access
it</p>
<div class="sourceCode" id="cb214"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>NoReturn <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># x, y, z exist only in function environment</span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> a <span class="sc">+</span> b </span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> (a <span class="sc">+</span> b)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> a <span class="sc">/</span> b</span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true" tabindex="-1"></a><span class="fu">NoReturn</span>(<span class="dv">1</span>, <span class="dv">2</span>)  <span class="co"># doesn&#39;t return anything</span></span>
<span id="cb214-8"><a href="#cb214-8" aria-hidden="true" tabindex="-1"></a>YesReturn <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb214-9"><a href="#cb214-9" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> a <span class="sc">+</span> b </span>
<span id="cb214-10"><a href="#cb214-10" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> (a <span class="sc">+</span> b)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb214-11"><a href="#cb214-11" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> a <span class="sc">/</span> b</span>
<span id="cb214-12"><a href="#cb214-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">c</span>(x, y, z))</span>
<span id="cb214-13"><a href="#cb214-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb214-14"><a href="#cb214-14" aria-hidden="true" tabindex="-1"></a><span class="fu">YesReturn</span>(<span class="dv">1</span>, <span class="dv">2</span>)  <span class="co"># returns x, y, and z</span></span></code></pre></div>
<pre><code>## [1] 3.0 9.0 0.5</code></pre>
</section>
<section id="function-output-1" class="slide level2">
<h2>Function output</h2>
<p>You can omit the <code>return()</code> function if you want</p>
<div class="sourceCode" id="cb216"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>YesReturn <span class="ot">&lt;-</span> <span class="cf">function</span>(a, b) {</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> a <span class="sc">+</span> b </span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> (a <span class="sc">+</span> b)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a>    z <span class="ot">&lt;-</span> a <span class="sc">/</span> b</span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(x, y, z)</span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a><span class="fu">YesReturn</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3.0 9.0 0.5</code></pre>
</section>
<section id="your-turn-18" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>Create a function that…</p>
<ol type="1">
<li><p>…takes in two arguments, <code>x</code> and <code>y</code>, and
computes <code>x * y * 2</code>.</p></li>
<li><p>…takes in three arguments, and makes a vector from the
result.</p></li>
<li><p>…counts the number of matching elements in two separate vectors.
<em>Hint:</em> use <code>%in%</code> to create a logical
statement.</p></li>
</ol>
</section>
<section id="function-arguments-1" class="slide level2">
<h2>Function arguments</h2>
<p>Arguments can be passed to a function as a vector or a list</p>
<div class="sourceCode" id="cb218"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">25</span>)</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>MultAlphaBeta <span class="ot">&lt;-</span> <span class="cf">function</span>(p) {</span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>    alpha <span class="ot">&lt;-</span> p[<span class="dv">1</span>]</span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a>    beta <span class="ot">&lt;-</span> p[<span class="dv">2</span>]</span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(alpha <span class="sc">*</span> beta)</span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a><span class="fu">MultAlphaBeta</span>(params)</span></code></pre></div>
<pre><code>## [1] 125</code></pre>
</section>
<section id="function-default-values" class="slide level2">
<h2>Function default values</h2>
<p>You can set pre-defined “default” values for function arguments</p>
<div class="sourceCode" id="cb220"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>subtract <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">a =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">2</span>) {</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(a <span class="sc">-</span> b)</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a><span class="fu">subtract</span>()</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb222"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subtract</span>(<span class="dv">3</span>, <span class="dv">6</span>)</span></code></pre></div>
<pre><code>## [1] -3</code></pre>
</section>
<section id="your-turn-19" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>Write a function that…</p>
<ol type="1">
<li><p>…takes a vector as an argument and multiplies the sum of the
vector by 10. Return a logical statement based on whether the sum is
under 1000.</p></li>
<li><p>…calculates the mean of every column in a data frame. Code the
function so that it does not evaluate the column mean if the column
elements are not numbers, using the logical statement
<strong><code>class(x) != "numeric"</code></strong>. Try your function
on the <code>iris</code> dataset.</p></li>
</ol>
</section>
<section id="your-turn-20" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<div class="sourceCode" id="cb224"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>ColumnMeans <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(x)) {</span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">class</span>(x[, i]) <span class="sc">!=</span> <span class="st">&quot;numeric&quot;</span>) {</span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>      output[i] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">class</span>(x[, i]) <span class="sc">==</span> <span class="st">&quot;numeric&quot;</span>) {</span>
<span id="cb224-8"><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a>      output[i] <span class="ot">&lt;-</span> <span class="fu">mean</span>(x[, i])</span>
<span id="cb224-9"><a href="#cb224-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb224-10"><a href="#cb224-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb224-11"><a href="#cb224-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(output) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(x)</span>
<span id="cb224-12"><a href="#cb224-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb224-13"><a href="#cb224-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb224-14"><a href="#cb224-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ColumnMeans</span>(iris)</span></code></pre></div>
<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
##     5.843333     3.057333     3.758000     1.199333           NA</code></pre>
</section>
<section id="useful-links-1" class="slide level2">
<h2>Useful links</h2>
<p><a href = "https://dept.stat.lsa.umich.edu/~jerrick/courses/stat506_f24/01-R-basics.html#functions" target = "_blank">Tutorial
on using functions in R</a></p>
<p><a href = "http://adv-r.had.co.nz/Functions.html" target = "_blank">Advanced
R - Functions</a></p>
</section>
<section id="practice-4" class="slide level2"
data-background-color="#fbb4ae">
<h2 data-background-color="#fbb4ae">Practice</h2>
<p><a href = "https://rpubs.com/mccannecology/53356" target = "_blank">Worksheet</a></p>
<p><a href = "https://rpubs.com/mccannecology/53362" target = "_blank">Answers</a></p>
</section></section>
<section>
<section id="part-6-data-visualization-using-ggplot2"
class="title-slide slide level1">
<h1><strong>Part 6:</strong> Data visualization using
<code>ggplot2</code></h1>

</section>
<section id="review-1" class="slide level2"
data-background-color="#decbe4">
<h2 data-background-color="#decbe4">Review</h2>
<p><code>ggplot2</code> is not a base package, so we need to install
it.</p>
<ol type="1">
<li>How would you install the package <code>ggplot2</code>?</li>
<li>What is the next step you need to do before you can use a function
from <code>ggplot2</code>?</li>
</ol>
</section>
<section id="install-and-load-ggplot2" class="slide level2">
<h2>Install and load <code>ggplot2</code></h2>
<div class="sourceCode" id="cb226"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
</section>
<section id="why-ggplot2" class="slide level2">
<h2>Why <code>ggplot2</code>?</h2>
<ul>
<li>Works very well with data frames, especially when some of your data
are factors</li>
<li>Easier to create visually appealing figures</li>
<li>Useful for exploring trends in your data</li>
</ul>
</section>
<section id="why-gg" class="slide level2">
<h2>Why gg?</h2>
<ul>
<li><code>gg</code> stands for “grammar of graphics”</li>
<li>There is a set of terms that defines the basic components of (every)
plot</li>
<li>Using this set of terms, you can produce figures using coherent,
consistent syntax (very similar code for very different figures)
<ul>
<li>However, this syntax does vary quite a bit from typical R
syntax!</li>
<li>If you are a little confused by the syntax at first, that probably
just means that you are getting more comfortable with the R
language</li>
</ul></li>
</ul>
</section>
<section id="the-grammar" class="slide level2">
<h2>The grammar</h2>
<ul>
<li>A basic <code>ggplot</code> consists of:
<ul>
<li><code>data</code>: Must be a <strong>data frame</strong></li>
<li><code>aes</code>(thetics): How your data are represented visually
<em>(x, y, color, size, shape, etc.)</em></li>
<li><code>geom</code>(etry): What type of geometric objects you want to
display <em>(points, lines, polygons, etc.)</em></li>
</ul></li>
</ul>
</section>
<section id="a-basic-plot" class="slide level2">
<h2>A basic plot</h2>
<div class="sourceCode" id="cb227"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-99-1.png" width="384" /></p>
</section>
<section id="plots-can-be-assembled-in-pieces" class="slide level2">
<h2>Plots can be assembled in pieces</h2>
<div class="sourceCode" id="cb228"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># US state data from 1977</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>state.df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(state.x77, state.region, state.abb)</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>state.fig <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Income, <span class="at">y =</span> Life.Exp))</span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a>state.fig <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-100-1.png" width="432" /></p>
</section>
<section id="aesthetics---point-size" class="slide level2">
<h2>Aesthetics - point size</h2>
<p>Increase the point size using the <code>size</code> argument in
<code>geom_point()</code></p>
<div class="sourceCode" id="cb229"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Income, <span class="at">y =</span> Life.Exp)) <span class="sc">+</span> </span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-101-1.png" width="432" /></p>
</section>
<section id="aesthetics---color" class="slide level2">
<h2>Aesthetics - color</h2>
<p>Differentiate state region by <strong>color</strong> using the
<code>color</code> argument in <code>aes()</code></p>
<div class="sourceCode" id="cb230"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Population, <span class="at">y =</span> Murder, <span class="at">color =</span> state.region)) <span class="sc">+</span> </span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-102-1.png" width="576" /></p>
</section>
<section id="aesthetics---shape" class="slide level2">
<h2>Aesthetics - shape</h2>
<p>Differentiate state region by <strong>shape</strong> using the
<code>shape</code> argument in <code>aes()</code></p>
<div class="sourceCode" id="cb231"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Life.Exp, <span class="at">y =</span> HS.Grad, <span class="at">color =</span> state.region, <span class="at">shape =</span> state.region)) <span class="sc">+</span> </span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-103-1.png" width="576" /></p>
</section>
<section id="your-turn-21" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<p>First, take a sample of 1000 rows from the <code>diamonds</code>
dataset (pre-installed with R). Then, try to generate this plot using
<code>ggplot()</code>.</p>
<div class="sourceCode" id="cb232"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>diamonds.samp <span class="ot">&lt;-</span> diamonds[<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(diamonds), <span class="dv">1000</span>), ]</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-105-1.png" width="576" /></p>
</section>
<section id="geoms" class="slide level2">
<h2>Geoms</h2>
<ul>
<li>Geoms are geometries that represent data points
<ul>
<li>We’ve already seen <code>geom_point()</code></li>
</ul></li>
<li>You can see all options by typing <code>geom_</code> and hitting the
tab key (<code>↹</code>)
<ul>
<li>Use <code>?geom_</code> to view the help page</li>
</ul></li>
</ul>
</section>
<section id="geoms---boxplot" class="slide level2">
<h2>Geoms - Boxplot</h2>
<div class="sourceCode" id="cb233"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Species,<span class="at">y =</span> Sepal.Length)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-106-1.png" width="384" /></p>
</section>
<section id="geoms---histograms" class="slide level2">
<h2>Geoms - Histograms</h2>
<p>You can change the aesthetics, like <code>binwidth</code> or
<code>fill</code></p>
<div class="sourceCode" id="cb234"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(faithful, <span class="fu">aes</span>(<span class="at">x =</span> waiting)) <span class="sc">+</span> </span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;paleturquoise&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-107-1.png" width="480" /></p>
</section>
<section id="geoms---bar-plots" class="slide level2">
<h2>Geoms - Bar plots</h2>
<div class="sourceCode" id="cb235"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Species, <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span> </span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;firebrick1&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-108-1.png" width="384" /></p>
</section>
<section id="geoms---line-plots" class="slide level2">
<h2>Geoms - Line plots</h2>
<div class="sourceCode" id="cb236"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>cyl <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(mtcars<span class="sc">$</span>cyl)</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> cyl)) <span class="sc">+</span> </span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-109-1.png" width="528" /></p>
</section>
<section id="geoms---density-plots" class="slide level2">
<h2>Geoms - Density plots</h2>
<div class="sourceCode" id="cb237"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(faithful, <span class="fu">aes</span>(waiting)) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">&quot;paleturquoise&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-110-1.png" width="480" /></p>
</section>
<section id="your-turn-22" class="slide level2"
data-background-color="#b3cde3">
<h2 data-background-color="#b3cde3">Your turn</h2>
<ol type="1">
<li>Make a histogram of <code>Sepal.Length</code> from the
<code>iris</code> data set. What did <code>ggplot2</code> do with the
different species?</li>
</ol>
</section>
<section id="facets" class="slide level2">
<h2>Facets</h2>
<ul>
<li><strong>Facets</strong> divide plots into subplots based on a
factor</li>
<li>Syntax is <code>facet_grid(. ~ Species)</code>, where columns are
species and there is only one row</li>
</ul>
<div class="sourceCode" id="cb238"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;royalblue1&quot;</span>) <span class="sc">+</span> </span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-111-1.png" width="576" /></p>
</section>
<section id="facets-1" class="slide level2">
<h2>Facets</h2>
<div class="sourceCode" id="cb239"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Sepal.Length)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;royalblue1&quot;</span>) <span class="sc">+</span> </span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(Species <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-112-1.png" width="288" /></p>
</section>
<section id="stats" class="slide level2">
<h2>Stats</h2>
<ul>
<li>Stats show summaries of your data by building a new variable to
plot</li>
<li>Type <code>stat_</code> and hit the tab key (<code>↹</code>) to see
all options
<ul>
<li>Use <code>?stat_</code> to see the help screen</li>
</ul></li>
</ul>
</section>
<section id="stats---smooth" class="slide level2">
<h2>Stats - smooth</h2>
<p>Use <code>stat_smooth</code> to add a linear fit to a scatterplot</p>
<div class="sourceCode" id="cb240"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span> </span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-113-1.png" width="576" /></p>
</section>
<section id="scales" class="slide level2">
<h2>Scales</h2>
<ul>
<li>Scales map data values to aesthetics</li>
<li>You can define colors, labels, limits, etc. for your scale</li>
<li>Scales can modify axis (<code>scale_y_</code>,
<code>scale_x_</code>), color (<code>scale_color_</code>), fill
(<code>scale_fill_</code>), shape (<code>scale_shape_</code>), and size
(<code>scale_size_</code>) aesthetics
<ul>
<li><code>scale_*_continuous()</code>: continuous data</li>
<li><code>scale_*_discrete()</code>: discrete data</li>
<li><code>scale_*_manual()</code>: discrete data, you specify</li>
<li><code>scale_*_log10()</code>: log transform an x- and/or y-axis</li>
</ul></li>
</ul>
</section>
<section id="scales---log-scale" class="slide level2">
<h2>Scales - log scale</h2>
<p>Include log x and log y axes using <code>scale_x_log10()</code> and
<code>scale_y_log10()</code></p>
<div class="sourceCode" id="cb241"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Population, <span class="at">y =</span> Area, <span class="at">color =</span> state.region)) <span class="sc">+</span> </span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">scale_y_log10</span>() <span class="sc">+</span> <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-114-1.png" width="576" /></p>
</section>
<section id="scales---manual" class="slide level2">
<h2>Scales - manual</h2>
<p>Choose colors manually using <code>scale_color_manual()</code></p>
<div class="sourceCode" id="cb242"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Population, <span class="at">y =</span> Area, <span class="at">color =</span> state.region)) <span class="sc">+</span> </span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">scale_y_log10</span>() <span class="sc">+</span> <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">South</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;palegreen3&quot;</span>, <span class="st">`</span><span class="at">Northeast</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;palevioletred3&quot;</span>, <span class="st">`</span><span class="at">West</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;peachpuff3&quot;</span>, <span class="st">`</span><span class="at">North Central</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;paleturquoise3&quot;</span>), <span class="at">name =</span> <span class="st">&quot;Region&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-115-1.png" width="576" /></p>
</section>
<section id="axis-labels" class="slide level2">
<h2>Axis labels</h2>
<p>Edit labels, including x- and y-axis labels, using
<code>labs()</code></p>
<div class="sourceCode" id="cb243"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Life.Exp, <span class="at">y =</span> HS.Grad, <span class="at">color =</span> state.region, <span class="at">shape =</span> state.region)) <span class="sc">+</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Life expectancy (years)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;High school graduation (%)&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-116-1.png" width="576" /></p>
</section>
<section id="labels-inside-figure" class="slide level2">
<h2>Labels inside figure</h2>
<p>Add labels inside the figure using <code>geom_text()</code></p>
<div class="sourceCode" id="cb244"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> state.df, <span class="fu">aes</span>(<span class="at">x =</span> Life.Exp, <span class="at">y =</span> HS.Grad, <span class="at">color =</span> state.region, <span class="at">shape =</span> state.region)) <span class="sc">+</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> state.abb), <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Life expectancy (years)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;High school graduation (%)&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-117-1.png" width="576" /></p>
</section>
<section id="themes" class="slide level2">
<h2>Themes</h2>
<ul>
<li>Use <strong>themes</strong> to control the aesthetics of the
figure</li>
<li>You can make broad changes by including <code>theme_bw()</code> or
<code>theme_classic()</code> (white backgrounds with/without gridlines,
respectively)</li>
<li>You can customize the theme by adding arguments to the
<code>theme()</code> function (see <code>?theme</code> for all
customization options)</li>
</ul>
</section>
<section id="themes-1" class="slide level2">
<h2>Themes</h2>
<div class="sourceCode" id="cb245"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span> </span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Serif&quot;</span>, <span class="at">size =</span> <span class="dv">14</span>))</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-118-1.png" width="576" /></p>
</section>
<section id="themes-2" class="slide level2">
<h2>Themes</h2>
<div class="sourceCode" id="cb246"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span> </span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;deeppink&quot;</span>))</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-119-1.png" width="576" /></p>
</section>
<section id="saving-plots" class="slide level2">
<h2>Saving plots</h2>
<ul>
<li>Plots created with <code>ggplot2</code> can be saved using the
<code>ggsave()</code> function</li>
<li>File type is determined by the file extension</li>
<li>Specify the dimensions (<code>height</code>, <code>width</code>) and
resolution (<code>dpi</code>, dots per inch)</li>
</ul>
<div class="sourceCode" id="cb247"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>iris.fig <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(Species, Sepal.Length)) <span class="sc">+</span> </span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>()</span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">&quot;IrisSepalLength.png&quot;</span>, iris.fig, <span class="at">dpi =</span> <span class="dv">600</span>,</span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="dv">4</span>, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span></code></pre></div>
</section>
<section id="wide-format-data" class="slide level2">
<h2>Wide format data</h2>
<p>Sometimes data is in a <strong>wide</strong> format, with multiple
observations in each row</p>
<div class="sourceCode" id="cb248"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a>spp.df.wide[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   SpeciesA SpeciesB SpeciesC SpeciesD
## 1 49.61576 78.20320 20.30636 25.60048
## 2 51.05926 80.13258 20.46518 26.32380
## 3 48.11434 73.57788 20.38281 25.50558</code></pre>
<div class="sourceCode" id="cb250"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(spp.df.wide)</span></code></pre></div>
<pre><code>## [1] 100   4</code></pre>
</section>
<section id="proper-data-format---long" class="slide level2">
<h2>Proper data format - long</h2>
<p>Data is much easier to analyze if it is in a <strong>long</strong>
format, with only one row per observation (experimental unit)</p>
<div class="sourceCode" id="cb252"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>spp.df.long[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   Species     Mass
## 1       A 84.85158
## 2       B 73.53687
## 3       C 78.70841</code></pre>
<div class="sourceCode" id="cb254"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(spp.df.long)</span></code></pre></div>
<pre><code>## [1] 400   2</code></pre>
</section>
<section id="melting-from-wide-to-long" class="slide level2">
<h2>Melting: from wide to long</h2>
<div class="sourceCode" id="cb256"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make some fake wide-format data</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>test.df.wide <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">A =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">6</span>),</span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">B =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">75</span>, <span class="dv">5</span>), </span>
<span id="cb256-4"><a href="#cb256-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">C =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">4</span>),</span>
<span id="cb256-5"><a href="#cb256-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">D =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">55</span>, <span class="dv">3</span>))</span>
<span id="cb256-6"><a href="#cb256-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test.df.wide)</span></code></pre></div>
<pre><code>##          A        B        C        D
## 1 47.36195 75.56843 48.55342 54.28444
## 2 57.62678 75.57699 51.28958 57.48009
## 3 41.08512 64.74984 49.06261 59.44645
## 4 37.74837 73.14452 52.44894 58.87176
## 5 59.08682 76.66800 45.42846 57.48863
## 6 38.38787 74.60036 48.85778 60.05602</code></pre>
</section>
<section id="melting-from-wide-to-long-1" class="slide level2">
<h2>Melting: from wide to long</h2>
<p>Use the <code>melt()</code> function from the <code>reshape2</code>
package</p>
<div class="sourceCode" id="cb258"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>test.df.long <span class="ot">&lt;-</span> <span class="fu">melt</span>(<span class="at">data =</span> test.df.wide,</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">variable.name =</span> <span class="st">&quot;Species&quot;</span>,</span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">value.name =</span> <span class="st">&quot;Mass&quot;</span>)</span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test.df.long)</span></code></pre></div>
<pre><code>##   Species     Mass
## 1       A 47.36195
## 2       A 57.62678
## 3       A 41.08512
## 4       A 37.74837
## 5       A 59.08682
## 6       A 38.38787</code></pre>
</section>
<section id="melting-from-wide-to-long-2" class="slide level2">
<h2>Melting: from wide to long</h2>
<p>Melting the data makes it easier to plot with
<code>ggplot2</code></p>
<div class="sourceCode" id="cb260"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test.df.long, <span class="fu">aes</span>(<span class="at">x =</span> Mass)) <span class="sc">+</span> </span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species) <span class="sc">+</span> </span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>, <span class="at">fill =</span> <span class="st">&quot;lightsalmon1&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-revealjs/unnamed-chunk-127-1.png" width="672" /></p>
</section>
<section id="useful-links-2" class="slide level2">
<h2>Useful links</h2>
<p><a href = "https://ggplot2.tidyverse.org/" target = "_blank">ggplot2
documentation</a></p>
<p><a href = "https://rstudio.github.io/cheatsheets/html/data-visualization.html" target = "_blank">ggplot
Cheat Sheet</a></p>
<p><a href = "http://colorbrewer2.org" target = "_blank">R
ColorBrewer</a></p>
<p><a href = "http://rpubs.com/mccannecology/47829" target = "_blank">Plotting
means and error bars</a></p>
<p><a href = "http://www.cookbook-r.com/Graphs/" target = "_blank">R
Cookbook: Graphs</a></p>
</section>
<section id="practice-5" class="slide level2"
data-background-color="#fbb4ae">
<h2 data-background-color="#fbb4ae">Practice</h2>
<p><a href = "https://rpubs.com/mccannecology/53357" target = "_blank">Worksheet</a></p>
<p><a href = "https://rpubs.com/mccannecology/53363" target = "_blank">Answers</a></p>
</section>
<section id="additional-topics-and-links" class="slide level2">
<h2>Additional topics and links</h2>
<ul>
<li>Using RMarkdown to document code in a more reproducible way:</li>
</ul>
<p><a href = "https://bookdown.org/yihui/rmarkdown-cookbook/" target = "_blank">RMarkdown
cookbook</a></p>
<p><a href = "https://rmarkdown.rstudio.com/lesson-15.HTML" target = "_blank">RMarkdown
cheatsheet</a></p>
<ul>
<li>Combining, or merging, multiple datasets (“data wrangling”):</li>
</ul>
<p><a href = "https://thomasadventure.blog/posts/r-merging-datasets/" target = "_blank">Merging
(Joining) datasets in R</a></p>
<p><a href = "https://r4ds.hadley.nz/joins.html" target = "_blank">Joins
using tidyverse</a></p>
</section>
<section id="github" class="slide level2">
<h2>Github</h2>
<p>Last, you may want to create a GitHub account (where I’ve uploaded
this course). GitHub is used for making code freely available as well as
for version control (important for collaborating on projects):</p>
<p><a href = "http://www.github.com" target = "_blank">GitHub</a></p>
<p><a href = "http://jonlefcheck.net/2013/11/04/a-basic-tutorial-to-version-control-using-git/" target = "_blank">Basic
tutorial on using GitHub (with RStudio)</a></p>
<p><a href = "https://docs.github.com/en/get-started/start-your-journey/about-github-and-git" target = "_blank">GitHub
tutorial</a></p>
</section></section>
    </div>
  </div>

  <script src="index_files/reveal.js-4.2.1/dist/reveal.js"></script>
  
  <!-- reveal.js plugins -->
  <script src="index_files/reveal.js-4.2.1/plugin/menu/menu.js"></script>
  
  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,
        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,
        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',
        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Can be used to limit the contexts in which the slide number appears
        showSlideNumber: 'all',
        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,
        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,
        // Push each slide change to the browser history
        // Implies `hash: true`
        history: true,
        // Enable keyboard shortcuts for navigation
        keyboard: true,
        // Enable the slide overview mode
        overview: true,
        // Vertical centering of slides
        center: false,
        // Enables touch navigation on devices with touch input
        touch: true,
        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',
        // Turns fragments on and off globally
        fragments: true,
        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,
        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,
        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,
        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,
        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,
        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,
        // Stop auto-sliding after user input
        autoSlideStoppable: true,
        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,
        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // Transition speed
        transitionSpeed: 'default', // default/fast/slow
        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
        // Number of slides away from the current that are visible
        viewDistance: 3,
        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,
        // The display mode that will be used to show slides
        display: 'block',
        // Hide cursor if inactive
        hideInactiveCursor: true,
        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,
        // Factor of the display size that should remain empty around the content
        margin: 0.02,

        menu: {
          // Configuration from
          // https://github.com/denehyg/reveal.js-menu#configuration
   
   
    
    
    
    
    
    
    
 
 
 
 
 
          // option not supported for change
          loadIcons: false, // using rmarkdown provided own.
          custom: false,
          themes: false,
          // themesPath: 'dist/theme/',
          transitions: false
        },



        // Optional reveal.js plugins
        plugins: [
          RevealMenu,
        ]
      });

    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
